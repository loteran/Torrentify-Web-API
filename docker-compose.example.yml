services:
  torrentify-web-api:
    build: .
    image: torrentify-web-api:latest
    container_name: torrentify-web-api
    restart: unless-stopped

    # Port web interface
    ports:
      - "3001:3000"

    environment:
      # Permissions (Unraid / Linux)
      PUID: 1000
      PGID: 1000

      # Activation des medias
      ENABLE_FILMS: "true"
      ENABLE_SERIES: "true"
      ENABLE_JEUX: "true"

      # TMDb - Obtenez votre cle sur https://www.themoviedb.org/settings/api
      TMDB_API_KEY: ""

      # Trackers (separes par virgules)
      # Exemple: https://tracker.example.com/announce?passkey=votre_passkey
      TRACKERS: ""

      # Optionnel
      PARALLEL_JOBS: 1

      # Hardlinks pour Transmission (seeding)
      # Format: source_prefix:hardlink_dir,source_prefix2:hardlink_dir2
      HARDLINK_MAPPING: ""

      # Web Interface
      WEB_PORT: 3000
      BASE_PATH: ""

    volumes:
      # Configuration persistante
      - ./config:/data/config

      # Acces aux montages host pour navigation fichiers ET creation torrents
      # IMPORTANT: Ne pas utiliser :ro si vous voulez creer des torrents dans ces chemins
      - /mnt:/mnt
      - /media:/media

      # Alternative: montages specifiques (plus securise)
      # - /chemin/vers/films:/data/films:ro        # Lecture seule pour les sources
      # - /chemin/vers/series:/data/series:ro      # Lecture seule pour les sources
      # - /chemin/vers/jeux:/data/jeux:ro          # Lecture seule pour les sources
      # - /chemin/vers/torrents:/data/torrent      # Lecture-ecriture pour la sortie

      # Hardlinks pour Transmission (meme filesystem requis)
      # - /chemin/vers/downloads:/data/hardlinks

      # Cache TMDb
      # - /chemin/vers/cache:/data/cache_tmdb

networks:
  default:
    name: torrentify-network
